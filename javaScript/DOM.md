# DOM

DOM(Document Object Model)은 HTML 문서의 계층적 구조와 정보를 표현하며 이를 제어할 수 있는 API, 즉 프로퍼티와 메서드를 제공하는 트리 자료구조이다.

---

## 노드

### HTML 요소와 노드 객체

HTML 요소는 렌더링 엔진에 의해 파싱되어 DOM을 구성하는 요소 노드 객체로 변환된다. 이때 HTML 요소의 어트리뷰트는 어트리뷰트 노드로, HTML 요소의 텍스트 콘텐츠는 텍스트 노드로 변환된다.

![HTML 요소](./asset/htmlElem.JPG)

![HTML 노드](./asset/htmlNodes.JPG)

HTML 요소 간에는 중첩 관계에 의해 계층적인 부자(parent-child) 관계가 형성된다. 이러한 HTML 요소 간의 부자 관계를 반영하여 HTML 문서의 구성 요소인 HTML 요소를 객체화한 모든 노드 객체들을 트리 자료구조로 구성한다.

---

### 노드 객체의 타입

노드 객체는 총 12개의 타입이 있는데, 중요한 노드 타입은 다음과 같다.

1. 문서 노드

   DOM 트리 최상위에 존재하는 루트 노드로, document 객체를 가리킨다. document 객체는 브라우저가 렌더링한 HTML 문서 전체를 가리키는 객체로, 전역 객체 window의 document 프로퍼티에 바인딩되어 있다.

   script 태그로 분리되어 있어도 자바스크립트 코드들은 하나의 전역 객체 window를 공유하기 때문에, window.document도 공유하게 되며, 이는 HTML 문서당 document 객체는 유일함을 말한다.

   문서 노드는 DOM 트리의 노드들에 접근하기 위한 진입점 역할을 담당한다.

2. 요소 노드

   요소 노드는 HTML 요소 간의 중첩에 의한 부자 관계를 가지며, 이를 통해 정보를 구조화하여 문서의 구조를 표현한다.

3. 어트리뷰트 노드

   어트리뷰트 노드에는 요소 노드만 연결되어 있기 때문에, 어트리뷰트 노드에 접근하기 위해서는 먼저 요소 노드에 접근하여야 한다. 요소 노드가 어트리뷰트 노드의 부모 노드는 아니며, 어트리뷰트 노드의 부모 노드는 존재하지 않는다.

4. 텍스트 노드

   요소 노드가 문서의 구조를 표현한다면, 텍스트 노드는 문서의 정보를 표현한다. 텍스트 노드는 요소 노드의 자식이며, 자식 노드를 가질 수 없는 리프 노드이기 때문에, DOM 트리의 최종단에 위치한다.

---

### 노드 객체의 상속 구조

노드 객체는 표준 빌트인 객체가 아닌 호스트 객체이다. 그럼에도 자바스크립트 객체이기 때문에 프로토타입에 의한 상속 구조를 갖는다.

![노드 객체의 상속 구조](./asset/nodeInherit.JPG)

모든 노드 객체는 Object, EventTarget, Node 인터페이스를 상속받는다. 추가로 문서 노드는 Document, HTMLDocument 인터페이스를 상속받고 어트리뷰트 노드는 Attr, 텍스트 노드는 CharacterData 인터페이스를 각각 상속받는다. 요소 노드는 Element 인터페이스를 상속받는다. 또한 요소 노드는 추가적으로 HTMLElement와 태그의 종류별로 세분화된 HTMLHtmlElement, HTMLHeadElement, HTMLBodyElement, HTMLUListElement 등의 인터페이스를 상속받는다.

다음은 input 요소 노드의 프로토타입 체인이다.

![요소 노드 프로토타입 체인](./asset/elemPrototype)

---
